Регистрация:

  curl -X POST http://localhost:8081/api/register \
    -H 'Content-Type: application/json' \
    -d '{"username":"alice","password":"password123","public_key":"alice_public_key","phone":"+7 999 123-45-67"}'

  Логин:

  curl -X POST http://localhost:8081/api/login \
    -H 'Content-Type: application/json' \
    -d '{"username":"alice","password":"password123"}'

  Логин по телефону:

  curl -X POST http://localhost:8081/api/login/phone \
    -H 'Content-Type: application/json' \
    -d '{"phone":"+7 999 123-45-67","password":"password123"}'

  Регистрация по телефону (отправка кода):

  curl -X POST http://localhost:8081/api/phone/send_code \
    -H 'Content-Type: application/json' \
    -d '{"phone":"+7 999 123-45-67"}'

  Регистрация по телефону (подтверждение кода):

  curl -X POST http://localhost:8081/api/phone/verify \
    -H 'Content-Type: application/json' \
    -d '{"phone":"+7 999 123-45-67","code":"123456","username":"alice","password":"password123","public_key":"alice_public_key"}'

  Профиль:

  curl http://localhost:8081/api/users/me \
    -H "Authorization: Bearer $TOKEN"

  Пользователь по id:

  curl http://localhost:8081/api/users/2 \
    -H "Authorization: Bearer $TOKEN"

  Создать чат:

  curl -X POST http://localhost:8081/api/chats \
    -H "Authorization: Bearer $TOKEN" \
    -H 'Content-Type: application/json' \
    -d '{"peer_user_id":2}'

  Список чатов:

  curl http://localhost:8081/api/chats \
    -H "Authorization: Bearer $TOKEN"

  История сообщений:

  curl "http://localhost:8081/api/chats/1/messages?limit=50&before_id=100" \
    -H "Authorization: Bearer $TOKEN"

  WebSocket:

  - URL: ws://localhost:8081/ws?chat_id=1
  - Заголовок: Authorization: Bearer $TOKEN
  - Отправка:

  {"type":"send","ciphertext":"BASE64_OR_ANY_TEXT","nonce":"NONCE_VALUE"}

  WebSocket чатов:

  - URL: ws://localhost:8081/ws/chats
  - Заголовок: Authorization: Bearer $TOKEN


   sudo k3s kubectl apply -f k8s/app.yaml
    sudo k3s kubectl get svc grape-app
